<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–∞-—Ç–µ–≥–∏ –¥–ª—è –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="FullScrn App">
    
    <!-- –¶–≤–µ—Ç –ø–∞–Ω–µ–ª–∏ —Å—Ç–∞—Ç—É—Å–∞ (–¥–ª—è iOS 15+) -->
    <meta name="theme-color" content="#–≤–∞—à—Ü–≤–µ—Ç">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    <!-- –ò–∫–æ–Ω–∫–∏ –¥–ª—è –≥–ª–∞–≤–Ω–æ–≥–æ —ç–∫—Ä–∞–Ω–∞ -->
    <link rel="apple-touch-icon" href="/icon-192x192.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/icon-180x180.png">
    <link rel="apple-touch-startup-image" href="/splash-screen.png">
    <link rel="manifest" href="/manifest.json">
    <title>FullScrn App</title>
    
    <style>
        /* –°—Ç–∏–ª–∏ —á—Ç–æ–±—ã —É–±—Ä–∞—Ç—å –ø–æ–ª–æ—Å—ã –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ –≤ –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–º —Ä–µ–∂–∏–º–µ */
        body {
            margin: 0;
            padding: 0;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            user-select: none;
            background-color: #ffffff;
            overflow: hidden;
            height: 100vh;
        }
    </style>
</head>
<body>
    <p style="margin: 10px;">Full Screen App. –ß—Ç–æ–±—ã –ø—Ä–µ–≤—Ä–∞—Ç–∏—Ç—å —Å–∞–π—Ç –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–±–∞–≤—å –µ–≥–æ –Ω–∞ —ç–∫—Ä–∞–Ω ¬´–î–æ–º–æ–π¬ª –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞</p>
    <button id="installButton" style="display: none;">
  üì± –î–æ–±–∞–≤–∏—Ç—å –Ω–∞ —ç–∫—Ä–∞–Ω ¬´–î–æ–º–æ–π¬ª
</button>
    <script>// –ñ–¥–µ–º –∑–∞–≥—Ä—É–∑–∫–∏ DOM
document.addEventListener('DOMContentLoaded', function() {
  const installButton = document.getElementById('installButton');
  let deferredPrompt;

  console.log('DOM –∑–∞–≥—Ä—É–∂–µ–Ω, –ø—Ä–æ–≤–µ—Ä—è–µ–º PWA –ø–æ–¥–¥–µ—Ä–∂–∫—É...');

  // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–¥–¥–µ—Ä–∂–∫—É PWA
  if (!('BeforeInstallPromptEvent' in window)) {
    console.log('–ë—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç PWA —É—Å—Ç–∞–Ω–æ–≤–∫—É');
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è —Ä—É—á–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏
    showManualInstructions();
    return;
  }

  window.addEventListener('beforeinstallprompt', (e) => {
    console.log('‚úÖ beforeinstallprompt —Å—Ä–∞–±–æ—Ç–∞–ª!');
    e.preventDefault();
    deferredPrompt = e;
    installButton.style.display = 'block';
  });

  installButton.addEventListener('click', async () => {
    if (!deferredPrompt) {
      console.log('‚ùå deferredPrompt –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω');
      showManualInstructions();
      return;
    }

    try {
      deferredPrompt.prompt();
      const { outcome } = await deferredPrompt.userChoice;
      
      console.log(`–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±—Ä–∞–ª: ${outcome}`);
      
      if (outcome === 'accepted') {
        installButton.textContent = '‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ!';
      }
      
      deferredPrompt = null;
      setTimeout(() => {
        installButton.style.display = 'none';
      }, 2000);
    } catch (error) {
      console.error('–û—à–∏–±–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏:', error);
      showManualInstructions();
    }
  });

  window.addEventListener('appinstalled', () => {
    console.log('‚úÖ PWA —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ!');
    installButton.style.display = 'none';
  });

  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π
  function showManualInstructions() {
    const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent);
    const isAndroid = /Android/.test(navigator.userAgent);
    
    let message = '–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–µ–Ω—é –±—Ä–∞—É–∑–µ—Ä–∞ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω';
    
    if (isIOS) {
      message = 'iOS: –ù–∞–∂–º–∏—Ç–µ üçè ‚Üí "–ù–∞ —ç–∫—Ä–∞–Ω –î–æ–º–æ–π"';
    } else if (isAndroid) {
      message = 'Android: –ú–µ–Ω—é ‚Üí "–î–æ–±–∞–≤–∏—Ç—å –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω"';
    }
    
    installButton.textContent = message;
    installButton.style.display = 'block';
    installButton.style.background = '#28a745';
  }

  // –ü—Ä–æ–≤–µ—Ä—è–µ–º —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã, –µ—Å–ª–∏ —Å–æ–±—ã—Ç–∏–µ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª–æ
  setTimeout(() => {
    if (installButton.style.display === 'none') {
      console.log('–°–æ–±—ã—Ç–∏–µ beforeinstallprompt –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª–æ –∑–∞ 3 —Å–µ–∫—É–Ω–¥—ã');
      showManualInstructions();
    }
  }, 3000);
});
</script>
<script>
// –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º Service Worker
if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('/sw.js')
    .then(() => console.log('Service Worker –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω'))
    .catch(err => console.log('–û—à–∏–±–∫–∞ Service Worker:', err));
}
</script>
</body>
</html>